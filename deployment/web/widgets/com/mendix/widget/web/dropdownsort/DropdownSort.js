define(["exports","react","react-dom"],(function(e,t,n){"use strict";var o,a={exports:{}};
/*!
    Copyright (c) 2017 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */o=a,function(){var e={}.hasOwnProperty;function t(){for(var n=[],o=0;o<arguments.length;o++){var a=arguments[o];if(a){var l=typeof a;if("string"===l||"number"===l)n.push(a);else if(Array.isArray(a)&&a.length){var i=t.apply(null,a);i&&n.push(i)}else if("object"===l)for(var r in a)e.call(a,r)&&a[r]&&n.push(r)}}return n.join(" ")}o.exports?(t.default=t,o.exports=t):window.classNames=t}();var l=a.exports;const i=({className:e,bootstrapStyle:n,children:o})=>t.Children.count(o)>0?t.createElement("div",{className:l("alert alert-".concat(n),e)},o):null;var r;function u(e,n){const[o,a]=t.useState(),l=t.useCallback((()=>{const t=null==e?void 0:e.getBoundingClientRect();var n,l;l=o,(n=t)&&l&&n.height===l.height&&n.width===l.width&&n.bottom===l.bottom&&n.top===l.top&&n.left===l.left&&n.right===l.right||a(t)}),[o,e]);return function(e){const n=t.useRef(),o=t.useCallback((()=>{e(),n.current=window.requestAnimationFrame(o)}),[e]);t.useEffect((()=>{if(e)return n.current=window.requestAnimationFrame(o),()=>{window.cancelAnimationFrame(n.current)}}),[e,o])}(n?l:void 0),o}function s(e){var o,a,i,r,s,c,d;const[p,v]=t.useState(null!==(i=null!==(a=null===(o=e.defaultOption)||void 0===o?void 0:o.caption)&&void 0!==a?a:e.emptyOptionCaption)&&void 0!==i?i:""),[m,f]=t.useState(null!==(r=e.defaultOption)&&void 0!==r?r:{caption:null!==(s=e.emptyOptionCaption)&&void 0!==s?s:"",value:""}),[y,b]=t.useState(!1),[h,w]=t.useState(0),[g,C]=t.useState(null!==(c=e.defaultDirection)&&void 0!==c?c:"asc"),E=t.useRef(null),k=t.useRef(null),S=u(E.current,y),x=t.useCallback((e=>{v(e.caption),f(e),b(!1)}),[]);var N,D;N=[E,k],D=()=>b(!1),t.useEffect((()=>{const e=e=>{if(Array.isArray(N)){if(N.some((t=>!t.current||t.current.contains(e.target))))return}else if(!N.current||N.current.contains(e.target))return;D()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[N,D]),t.useEffect((()=>{var t;m&&(null===(t=e.updateSort)||void 0===t||t.call(e,m,g))}),[g,m]);const O=!m||p===e.emptyOptionCaption,A=n.createPortal(t.createElement("ul",{ref:k,id:"".concat(e.name,"-dropdown-list"),className:"dropdown-list",role:"menu","data-focusindex":0,style:{position:"fixed",width:h,top:null==S?void 0:S.bottom,left:null==S?void 0:S.left}},e.options.map(((n,o)=>t.createElement("li",{className:l({"filter-selected":(null==m?void 0:m.value)===n.value}),key:o,onClick:e=>{e.preventDefault(),e.stopPropagation(),x(n)},onKeyDown:t=>{var a,l,i,r;"Enter"===t.key||" "===t.key?(t.preventDefault(),t.stopPropagation(),x(n)):"Tab"===t.key&&o+1===e.options.length?(t.preventDefault(),b(!1),null===(l=null===(a=E.current)||void 0===a?void 0:a.querySelector("button"))||void 0===l||l.focus()):("Tab"===t.key&&t.shiftKey&&0===o||"Escape"===t.key)&&(t.preventDefault(),b(!1),null===(r=null===(i=E.current)||void 0===i?void 0:i.querySelector("input"))||void 0===r||r.focus())},role:"menuitem",tabIndex:0},t.createElement("div",{className:"filter-label"},n.caption))))),document.body),L=t.useCallback((()=>{b((e=>!e)),setTimeout((()=>{var e,t;null===(t=null===(e=k.current)||void 0===e?void 0:e.querySelector("li.filter-selected"))||void 0===t||t.focus()}),10)}),[]);return t.createElement("div",{className:l("dropdown-container",e.className),"data-focusindex":null!==(d=e.tabIndex)&&void 0!==d?d:0,ref:E,style:e.styles},t.createElement("div",{className:"dropdown-triggerer-wrapper"},t.createElement("input",{value:O?"":p,placeholder:O?e.emptyOptionCaption:void 0,className:"form-control dropdown-triggerer",onClick:L,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),L())},"aria-haspopup":!0,ref:e=>{e&&e.clientWidth&&w(e.clientWidth)},"aria-expanded":y,"aria-controls":"".concat(e.name,"-dropdown-list"),"aria-label":e.ariaLabel}),t.createElement("button",{className:l("btn btn-default btn-sort",{"icon-asc":"asc"===g,"icon-desc":"desc"===g}),onClick:()=>C((e=>"asc"===e?"desc":"asc"))})),y&&A)}i.displayName="Alert",function(e){e.Number="number",e.DateTime="datetime"}(r||(r={})),e.DropdownSort=function(e){var n,o,a,l,r,u;const c=null!==(n=window["com.mendix.widgets.web.sortable.sortContext"])&&void 0!==n?n:{},d=t.createElement(i,{bootstrapStyle:"danger"},"The Drop-down sort widget must be placed inside the header of the Gallery widget."),{sortDispatcher:p,attributes:v,initialSort:m}=null!==(o=t.useContext(c))&&void 0!==o?o:{};let f,y;const b=t.useMemo((()=>{var t,n,o;return[{caption:null!==(n=null===(t=e.emptyOptionCaption)||void 0===t?void 0:t.value)&&void 0!==n?n:"",value:""},...null!==(o=null==v?void 0:v.map((e=>({caption:e.caption,value:e.attribute.id}))))&&void 0!==o?o:[]]}),[v,null===(a=e.emptyOptionCaption)||void 0===a?void 0:a.value]),h=t.useCallback(((e,t)=>{const n=null==v?void 0:v.find((t=>t.attribute.id===e.value));p({getSortCondition:()=>function(e,t,n){if(!e||!e.sortable||!n)return;const{id:o}=e;return[o,t]}(null==n?void 0:n.attribute,t,e)})}),[v,p]);if(!p||!v)return d;if(m&&m.length>0){const[e]=m,[t,n]=e;t&&(f=b.find((e=>e.value===String(t)))),n&&(y=n)}return t.createElement(s,{key:null!==(l=null==f?void 0:f.value)&&void 0!==l?l:"sort-component",ariaLabel:null===(r=e.ariaLabel)||void 0===r?void 0:r.value,className:e.class,defaultDirection:y,defaultOption:f,emptyOptionCaption:null===(u=e.emptyOptionCaption)||void 0===u?void 0:u.value,name:e.name,options:b,styles:e.style,tabIndex:e.tabIndex,updateSort:h})},Object.defineProperty(e,"__esModule",{value:!0})}));
