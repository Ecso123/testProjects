import{createElement as e,createContext as n,useContext as t,useEffect as r,useCallback as a,useMemo as i,useRef as o,useState as l,useLayoutEffect as d}from"react";var c,s={exports:{}};
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/c=s,function(){var e={}.hasOwnProperty;function n(){for(var t=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var i=typeof a;if("string"===i||"number"===i)t.push(a);else if(Array.isArray(a)&&a.length){var o=n.apply(null,a);o&&t.push(o)}else if("object"===i)for(var l in a)e.call(a,l)&&a[l]&&t.push(l)}}return t.join(" ")}c.exports?(n.default=n,c.exports=n):window.classNames=n}();var u=s.exports;const v=({icon:n,className:t="",fallback:r})=>"glyph"===(null==n?void 0:n.type)?e("span",{className:u("glyphicon",t,n.iconClass),"aria-hidden":!0}):"image"===(null==n?void 0:n.type)?e("img",{className:t,src:n.iconUrl,"aria-hidden":!0,alt:""}):r||null;var h;v.displayName="Icon",function(e){e.Number="number",e.DateTime="datetime"}(h||(h={}));const m=n({level:0,informParentToHaveChildNodes:()=>null,informParentIsLoading:()=>null});const w={ArrowDown:["ArrowDown","Down"],ArrowLeft:["ArrowLeft","Left"],ArrowRight:["ArrowRight","Right"],ArrowUp:["ArrowUp","Up"],Space:[" "]},g=(e,n,t,r,o)=>{const l=(e=>a((n=>{const t=n.key,r=t in e?t:Object.keys(w).find((e=>{var n;return null===(n=w[e])||void 0===n?void 0:n.includes(t)}));if(r){const t=e[r];t&&("Enter"!==r&&"Space"!==r||n.stopPropagation(),n.preventDefault(),t(n))}}),[e]))(i((()=>({Enter:e,Space:e,Home:e=>n(e.currentTarget,"FIRST"),End:e=>n(e.currentTarget,"LAST"),ArrowUp:e=>n(e.currentTarget,"PREVIOUS","HORIZONTAL"),ArrowDown:e=>n(e.currentTarget,"NEXT","HORIZONTAL"),ArrowRight:a=>{"COLLAPSED_WITH_CSS"===t||"COLLAPSED_WITH_JS"===t?e(a):("EXPANDED"===t||r)&&n(a.currentTarget,"NEXT","VERTICAL")},ArrowLeft:a=>{"COLLAPSED_WITH_CSS"===t||"COLLAPSED_WITH_JS"===t||r?n(a.currentTarget,"PREVIOUS","VERTICAL"):"EXPANDED"===t&&e(a)}})),[e,n,t,r]));return a((e=>{if(!o(e))return l(e)}),[o,l])},C=({className:n})=>e("svg",{className:n,"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M1.64598 4.64601C1.69242 4.59945 1.7476 4.5625 1.80834 4.5373C1.86909 4.51209 1.93421 4.49911 1.99998 4.49911C2.06575 4.49911 2.13087 4.51209 2.19161 4.5373C2.25236 4.5625 2.30753 4.59945 2.35398 4.64601L7.99998 10.293L13.646 4.64601C13.6925 4.59952 13.7477 4.56264 13.8084 4.53749C13.8691 4.51233 13.9342 4.49938 14 4.49938C14.0657 4.49938 14.1308 4.51233 14.1916 4.53749C14.2523 4.56264 14.3075 4.59952 14.354 4.64601C14.4005 4.6925 14.4373 4.74769 14.4625 4.80842C14.4877 4.86916 14.5006 4.93426 14.5006 5.00001C14.5006 5.06575 14.4877 5.13085 14.4625 5.19159C14.4373 5.25233 14.4005 5.30752 14.354 5.35401L8.35398 11.354C8.30753 11.4006 8.25236 11.4375 8.19161 11.4627C8.13087 11.4879 8.06575 11.5009 7.99998 11.5009C7.93421 11.5009 7.86909 11.4879 7.80834 11.4627C7.7476 11.4375 7.69242 11.4006 7.64598 11.354L1.64598 5.35401C1.59942 5.30756 1.56247 5.25239 1.53727 5.19164C1.51206 5.1309 1.49908 5.06578 1.49908 5.00001C1.49908 4.93424 1.51206 4.86912 1.53727 4.80837C1.56247 4.74763 1.59942 4.69245 1.64598 4.64601V4.64601Z"}));function f({class:n,items:i,style:o,isUserDefinedLeafNode:d,showCustomIcon:c,startExpanded:s,iconPlacement:h,expandIcon:w,collapseIcon:g,tabIndex:f,animateIcon:E,animateTreeViewContent:A}){const{informParentIsLoading:I,level:N}=t(m),L=a(((n,t)=>{if("LOADING"===n)return e("img",{src:"data:image/svg+xml,%3Csvg%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ccircle%20cx%3D%2212%22%20cy%3D%2212%22%20r%3D%2210.5%22%20stroke%3D%22%23F8F8F8%22%20stroke-width%3D%223%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3Cmask%20id%3D%22path-2-inside-1%22%20fill%3D%22white%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M0%2012.0524C0%2018.6274%205.37258%2024%2012.0524%2024C18.6274%2024%2024%2018.6274%2024%2012.0524C24%205.37258%2018.6274%200%2012.0524%200%22%2F%3E%3C%2Fmask%3E%3Cpath%20d%3D%22M24%2012.0524L21%2012.0524L24%2012.0524ZM-3%2012.0524C-3%2020.3013%203.73282%2027%2012.0524%2027V21C7.01235%2021%203%2016.9535%203%2012.0524H-3ZM12.0524%2027C20.2843%2027%2027%2020.2843%2027%2012.0524L21%2012.0524C21%2016.9706%2016.9706%2021%2012.0524%2021V27ZM27%2012.0524C27%203.73282%2020.3013%20-3%2012.0524%20-3V3C16.9535%203%2021%207.01235%2021%2012.0524L27%2012.0524Z%22%20fill%3D%22%23264AE5%22%20mask%3D%22url%28%23path-2-inside-1%29%22%2F%3E%3C%2Fsvg%3E",className:"widget-tree-view-loading-spinner",alt:"","aria-hidden":!0});const r="EXPANDED"===n;return c?e(v,{icon:r?g:w,className:"widget-tree-view-branch-header-icon"}):e(C,{className:u("widget-tree-view-branch-header-icon",{"widget-tree-view-branch-header-icon-animated":E,"widget-tree-view-branch-header-icon-collapsed-left":!r&&"left"===t,"widget-tree-view-branch-header-icon-collapsed-right":!r&&"right"===t})})}),[g,w,c,E]),[T,S]=l(null),y=a((e=>{e&&S(e)}),[]),b=a((()=>{var e,n;return null!==(n=null===(e=null==T?void 0:T.parentElement)||void 0===e?void 0:e.className.includes(p.bodyClassName))&&void 0!==n&&n}),[T]);r((()=>{I(!i)}),[i,I]),((e,n)=>{const{level:a,informParentToHaveChildNodes:i}=t(m);r((()=>{a>0&&e&&n()&&i(e.length>0)}),[e,a,i,n])})(i,b);const P=a(((e,n,t)=>{if(e&&e instanceof Element){const r=e=>{if(e){const n=Array.from(e.querySelectorAll("li.widget-tree-view-branch")),t=Array.from(e.querySelectorAll(".widget-tree-view-body[aria-hidden=true]"));return n.filter((e=>!t.some((n=>n.contains(e)))))}return[]},a=Array.from(document.body.querySelectorAll(".widget-tree-view[role=tree]")).find((n=>n.contains(e)));if(!a)return;const i=r(a),o=i.length;if(0===o)return;const l=i.findIndex((n=>n.isSameNode(e)));switch(n){case"FIRST":i[0].focus();break;case"LAST":i[o-1].focus();break;case"PREVIOUS":{if("VERTICAL"===t){const n=r(document).filter((n=>{var t;return null===(t=n.lastElementChild)||void 0===t?void 0:t.contains(e)}));return void(n.length>0&&n[n.length-1].focus())}const n=l-1,a=Math.max(n,0);a!==l&&i[a].focus();break}case"NEXT":{if("VERTICAL"===t){const n=r(e.lastElementChild);return void(n.length>0&&n[0].focus())}const n=l+1,a=Math.min(n,o-1);a!==l&&i[a].focus();break}}}}),[]);return i?e("ul",{className:u("widget-tree-view",n),style:o,ref:y,"data-focusindex":f||0,role:0===N?"tree":"group"},i.map((({id:n,value:t,content:r})=>e(D,{key:n,id:n,value:t,isUserDefinedLeafNode:d,startExpanded:s,iconPlacement:h,renderHeaderIcon:L,changeFocus:P,animateTreeViewContent:A},r)))):null}const p={bodyClassName:"widget-tree-view-body",getHeaderId:e=>"".concat(e,"TreeViewBranchHeader"),getBodyId:e=>"".concat(e,"TreeViewBranchBody")};function D(n){const{level:i}=t(m),[c,s]=l(n.startExpanded?"EXPANDED":"COLLAPSED_WITH_JS"),[v,h]=l(n.isUserDefinedLeafNode||!n.children),w=a((e=>{e||s((e=>"LOADING"===e?"EXPANDED":e))}),[]),C=o(null),f=o(null),{hasNestedTreeView:D}=(e=>({hasNestedTreeView:a((()=>{var n,t,r;return null===(r=null===(t=null===(n=e.current)||void 0===n?void 0:n.lastElementChild)||void 0===t?void 0:t.className.includes("widget-tree-view"))||void 0===r||r}),[])}))(C),{isAnimating:E,captureElementHeight:A,animateTreeViewContent:I,cleanupAnimation:N}=(e=>{const n=o(),[t,r]=l(!1);return{isAnimating:t,captureElementHeight:a((()=>{var t,r;n.current=null!==(r=null===(t=e.current)||void 0===t?void 0:t.getBoundingClientRect().height)&&void 0!==r?r:0}),[]),animateTreeViewContent:a((()=>{if(e.current&&void 0!==n.current&&!Number.isNaN(n.current)){const t=e.current.getBoundingClientRect().height;if(t-n.current!=0){r(!0),e.current.style.height="".concat(n.current,"px");const a=setTimeout((()=>{e.current.style.height="".concat(t,"px"),n.current=t}),1);return()=>clearTimeout(a)}}}),[]),cleanupAnimation:a((()=>{var n;r(!1),null===(n=e.current)||void 0===n||n.style.removeProperty("height")}),[])}})(C);d((()=>{if(n.animateTreeViewContent&&"LOADING"!==c){const e=I();if(e)return e}}),[I,n.animateTreeViewContent,c]);const L=a((e=>{var n,t,r,a,i;const o=e.target;return!(null===(n=f.current)||void 0===n?void 0:n.isSameNode(o))&&!(null===(r=null===(t=f.current)||void 0===t?void 0:t.firstElementChild)||void 0===r?void 0:r.contains(o))&&!(null===(i=null===(a=f.current)||void 0===a?void 0:a.lastElementChild)||void 0===i?void 0:i.isSameNode(o))}),[]);r((()=>{"LOADING"===c&&(D()||s("EXPANDED"))}),[D,c]);const T=a((e=>{L(e)||v||(A(),s((e=>"LOADING"===e?e:"COLLAPSED_WITH_JS"===e?"LOADING":"COLLAPSED_WITH_CSS"===e?"EXPANDED":"COLLAPSED_WITH_CSS")))}),[v,L,A]),S={"aria-expanded":"EXPANDED"===c,role:"treeitem",tabIndex:0};const y=a((e=>{e||v?e&&v&&h(!1):h(!0)}),[v]),b=g(T,n.changeFocus,c,v,L),P=a((e=>{L(e)||T(e)}),[T,L]);return e("li",Object.assign({className:"widget-tree-view-branch",onClick:P,onKeyDown:b,ref:f},S),e("span",{className:u("widget-tree-view-branch-header",{"widget-tree-view-branch-header-clickable":!v,"widget-tree-view-branch-header-reversed":"left"===n.iconPlacement}),id:p.getHeaderId(n.id)},e("span",{className:"widget-tree-view-branch-header-value"},n.value),!v&&"no"!==n.iconPlacement&&n.renderHeaderIcon(c,n.iconPlacement)),(!v&&"COLLAPSED_WITH_JS"!==c||E)&&e(m.Provider,{value:{level:i+1,informParentToHaveChildNodes:y,informParentIsLoading:w}},e("div",{className:u(p.bodyClassName,{"widget-tree-view-branch-hidden":"COLLAPSED_WITH_CSS"===c&&!E}),id:p.getBodyId(n.id),"aria-hidden":"EXPANDED"!==c,ref:C,onTransitionEnd:N},n.children)))}function E(n){var t,r,a,i;const o="available"===n.datasource.status?null!==(r=null===(t=n.datasource.items)||void 0===t?void 0:t.map((e=>function(e,n){var t,r,a;return{id:e.id,value:"text"===n.headerType?null===(t=n.headerCaption)||void 0===t?void 0:t.get(e).value:null===(r=n.headerContent)||void 0===r?void 0:r.get(e),content:null===(a=n.children)||void 0===a?void 0:a.get(e)}}(e,n))))&&void 0!==r?r:[]:null,l="available"===(null===(a=n.expandIcon)||void 0===a?void 0:a.status)?n.expandIcon.value:null,d="available"===(null===(i=n.collapseIcon)||void 0===i?void 0:i.status)?n.collapseIcon.value:null;return e(f,{name:n.name,class:n.class,style:n.style,items:o,isUserDefinedLeafNode:!n.hasChildren,startExpanded:n.startExpanded,showCustomIcon:n.advancedMode&&(Boolean(n.expandIcon)||Boolean(n.collapseIcon)),iconPlacement:n.showIcon,expandIcon:l,collapseIcon:d,tabIndex:n.tabIndex,animateIcon:n.animate&&n.animateIcon,animateTreeViewContent:n.animate})}export{E as TreeView};
